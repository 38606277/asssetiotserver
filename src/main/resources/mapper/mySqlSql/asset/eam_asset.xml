<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="eam_asset">

	<insert id="addAsset"   useGeneratedKeys="true" keyProperty="id" parameterType="Map">
		insert into eam_asset
		 (asset_num,asset_name,iot_num)
		values
		 (#{asset_num}, #{asset_name},  #{iot_num})
	</insert>
	<update id="updateAsset" parameterType="Map">
		update eam_asset set
			asset_num='${asset_num}',
			asset_name='${asset_name}',
			iot_num='${iot_num}'
		where
		    asset_id=${asset_id}
	</update>

	<delete id="deleteAsset" parameterType="map">
		delete from eam_asset where asset_id in (${asset_ids})
	</delete>

	<select id="getAssetById" resultType="map" parameterType="int">
		select asset_id,asset_num,asset_name,iot_num from eam_asset where asset_id = #{assetId}
	</select>

	<select id="queryCountByAssetId" resultType="int" parameterType="int">
		select count(asset_id) from eam_asset where asset_id = #{assetId}
	</select>

	<select id="countEamAsset" resultType="int">
		select count(asset_id) from eam_asset
	</select>

	<delete id="rmEamAsset" parameterType="int">
		delete from eam_asset where asset_id=#{assetId}
	</delete>


	<update id="bindEamTag" parameterType="Map">
		update eam_asset set asset_num = #{asset_num} where asset_id=#{asset_id}
	</update>


	<select id="listEamAssetByPage" resultType="Map" parameterType="Map">
		select * from eam_asset e
		where 1=1
		<if test="asset_id != null and asset_id!=''">  and e.asset_id like '%${asset_id}%' </if>
		limit #{startIndex},#{perPage}
	</select>

	<select id="listBindingEamAssetByPage" resultType="Map" parameterType="Map">
		SELECT
		e.asset_id,
		e.asset_name,
		e.asset_num,
		e.`user`,
		e.responsible,
		g.gateway_id
		FROM
		eam_asset e
		LEFT JOIN eam_gateway_asset g ON g.asset_id = e.asset_id
	</select>


</mapper>
